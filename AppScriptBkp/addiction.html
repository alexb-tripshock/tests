<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Addictions</title>
  <?!= include('stylesheet'); ?>
</head>
<body>
  <h2>Введите Ваш ник из чата:</h2>
  <input type="text" id="nickname" placeholder="Ваш ник чатланин..." />
  
  <h2>Город (необязательно):</h2>
  <input type="text" id="city" placeholder="Введите Ваш город..." />

  <h2>Время в чате (необязательно):</h2>
  <input type="text" id="time" placeholder="Сколько вы уже в чате?" />

  <div id="questions">
  <p>1. Часто ли вы чувствуете, что не можете контролировать свое поведение в отношении определенного вещества или занятия? </p>
  <div>
    <input type="radio" name="q1" id="q1_no" value="0">
    <label for="q1_no">Нет</label>
    <input type="radio" name="q1" id="q1_yes" value="1">
    <label for="q1_yes">Да</label>
  </div>
  <p>2. Продолжаете ли вы заниматься определенным поведением или употреблять вещество, несмотря на негативные последствия для вашего здоровья, отношений или работы?</p>
  <div>
    <input type="radio" name="q2" id="q2_no" value="0">
    <label for="q2_no">Нет</label>
    <input type="radio" name="q2" id="q2_yes" value="1">
    <label for="q2_yes">Да</label>
  </div>
  <p>3. Часто ли вы испытываете симптомы отмены или дискомфорт, когда пытаетесь прекратить или уменьшить употребление вещества или занятие?</p>
  <div>
    <input type="radio" name="q3" id="q3_no" value="0">
    <label for="q3_no">Нет</label>
    <input type="radio" name="q3" id="q3_yes" value="1">
    <label for="q3_yes">Да</label>
  </div>
  <p>4. Чувствуете ли вы, что вам нужно все больше и больше вещества или времени, чтобы достичь желаемого эффекта?</p>
  <div>
    <input type="radio" name="q4" id="q4_no" value="0">
    <label for="q4_no">Нет</label>
    <input type="radio" name="q4" id="q4_yes" value="1">
    <label for="q4_yes">Да</label>
  </div>
  <p>5. Пренебрегаете ли вы важными обязанностями или занятиями из-за своего поведения или употребления вещества?</p>
  <div>
    <input type="radio" name="q5" id="q5_no" value="0">
    <label for="q5_no">Нет</label>
    <input type="radio" name="q5" id="q5_yes" value="1">
    <label for="q5_yes">Да</label>
  </div>
  <p>6. Продолжаете ли вы заниматься определенным поведением или употреблять вещество, несмотря на то, что это причиняет вам проблемы в отношениях с другими людьми?</p>
  <div>
    <input type="radio" name="q6" id="q6_no" value="0">
    <label for="q6_no">Нет</label>
    <input type="radio" name="q6" id="q6_yes" value="1">
    <label for="q6_yes">Да</label>
  </div>
  <p>7. Часто ли вы чувствуете вину или стыд из-за своего поведения или употребления вещества?</p>
  <div>
    <input type="radio" name="q7" id="q7_no" value="0">
    <label for="q7_no">Нет</label>
    <input type="radio" name="q7" id="q7_yes" value="1">
    <label for="q7_yes">Да</label>
  </div>
  <p>8. Пытались ли вы прекратить или уменьшить употребление вещества или занятие, но не смогли?</p>
  <div>
    <input type="radio" name="q8" id="q8_no" value="0">
    <label for="q8_no">Нет</label>
    <input type="radio" name="q8" id="q8_yes" value="1">
    <label for="q8_yes">Да</label>
  </div>
  <p><button onclick="submitAnswers()">Отправить</button></p>
  <script>
    function submitAnswers() {
      const nickname = document.getElementById("nickname").value.trim();
      const city = document.getElementById("city").value.trim();
      const time = document.getElementById("time").value.trim();
      if (!nickname) return alert("Введите никнейм!");

    let score = 0;
    for (let i = 1; i <= 8; i++) {
      const selected = document.querySelector(`input[name="q${i}"]:checked`);
      if (selected) {
        score += parseInt(selected.value);
      }
    }

    let feedback = "";
    if (score == 0) {
      feedback = "Вы не демонстрируете признаков аддикции или пристрастия.";
    } else if (score <= 3) {
      feedback = "Вы можете иметь некоторые проблемы с зависимостью, но они не кажутся слишком серьезными. Однако, если вы обеспокоены своим поведением, рекомендуется обратиться за советом к специалисту.";
    } else {
      feedback = "Вы можете иметь признаки аддикции или пристрастия. Рекомендуется обратиться за помощью к специалисту.";
    }

    google.script.run.recordResponseToGoogleSheet({ nickname, city, time, score }, "addiction");

    document.body.innerHTML = `
      <h3>Спасибо, ${nickname}! Ваш результат: ${score} из 8</h3>
      <div class="result-message">${feedback}</div>
    `;
    }
  </script>
</body>
</html>